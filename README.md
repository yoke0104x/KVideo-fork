# KVideo

![KVideo Banner](public/icon.png)

> ä¸€ä¸ªåŸºäº Next.js 16 æ„å»ºçš„ç°ä»£åŒ–è§†é¢‘èšåˆæ’­æ”¾å¹³å°ã€‚é‡‡ç”¨ç‹¬ç‰¹çš„ "Liquid Glass" è®¾è®¡è¯­è¨€ï¼Œæä¾›æµç•…çš„è§†è§‰ä½“éªŒå’Œå¼ºå¤§çš„è§†é¢‘æœç´¢åŠŸèƒ½ã€‚

[![Next.js](https://img.shields.io/badge/Next.js-16.0-black?style=for-the-badge&logo=next.js)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.2-blue?style=for-the-badge&logo=react)](https://react.dev/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-4.0-38B2AC?style=for-the-badge&logo=tailwind-css)](https://tailwindcss.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?style=for-the-badge&logo=typescript)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)](LICENSE)

## ğŸ“– é¡¹ç›®ç®€ä»‹

**KVideo** æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€ç°ä»£åŒ–çš„è§†é¢‘èšåˆä¸æ’­æ”¾åº”ç”¨ï¼Œä¸“æ³¨äºæä¾›æè‡´çš„ç”¨æˆ·ä½“éªŒå’Œè§†è§‰è®¾è®¡ã€‚æœ¬é¡¹ç›®åˆ©ç”¨ Next.js 16 çš„æœ€æ–°ç‰¹æ€§ï¼Œç»“åˆ React 19 å’Œ Tailwind CSS v4ï¼Œæ‰“é€ äº†ä¸€ä¸ªæ—¢ç¾è§‚åˆå¼ºå¤§çš„è§†é¢‘æµè§ˆå¹³å°ã€‚

### æ ¸å¿ƒè®¾è®¡ç†å¿µï¼šLiquid Glassï¼ˆæ¶²æ€ç»ç’ƒï¼‰

é¡¹ç›®çš„è§†è§‰è®¾è®¡åŸºäº **"Liquid Glass"** è®¾è®¡ç³»ç»Ÿï¼Œè¿™æ˜¯ä¸€å¥—èåˆäº†ä»¥ä¸‹ç‰¹æ€§çš„ç°ä»£åŒ– UI è®¾è®¡è¯­è¨€ï¼š

- **ç»ç’ƒæ‹Ÿæ€æ•ˆæœ**ï¼šé€šè¿‡ `backdrop-filter` å®ç°çš„ç£¨ç ‚åŠé€æ˜æ•ˆæœï¼Œè®© UI å…ƒç´ å¦‚åŒçœŸå®çš„ç»ç’ƒæè´¨
- **é€šç”¨æŸ”å’Œåº¦**ï¼šç»Ÿä¸€ä½¿ç”¨ `rounded-2xl` å’Œ `rounded-full` ä¸¤ç§åœ†è§’åŠå¾„ï¼Œåˆ›é€ å’Œè°çš„è§†è§‰ä½“éªŒ
- **å…‰å½±äº¤äº’**ï¼šæ‚¬åœå’Œèšç„¦çŠ¶æ€ä¸‹çš„å†…å‘å…‰æ•ˆæœï¼Œæ¨¡æ‹Ÿå…‰çº¿è¢«"æ•è·"çš„ç‰©ç†ç°è±¡
- **æµç•…åŠ¨ç”»**ï¼šåŸºäºç‰©ç†çš„ `cubic-bezier` æ›²çº¿ï¼Œå®ç°è‡ªç„¶çš„åŠ é€Ÿå’Œå‡é€Ÿè¿‡æ¸¡
- **æ·±åº¦å±‚çº§**ï¼šæ¸…æ™°çš„ z-axis å±‚æ¬¡ç»“æ„ï¼Œå¢å¼ºç©ºé—´æ„Ÿå’Œäº¤äº’åé¦ˆ

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¥ æ™ºèƒ½è§†é¢‘æ’­æ”¾

- **HLS æµåª’ä½“æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒ HLS (.m3u8) æ ¼å¼ï¼Œæä¾›æµç•…çš„è§†é¢‘æ’­æ”¾ä½“éªŒ
- **æ™ºèƒ½ç¼“å­˜æœºåˆ¶**ï¼šService Worker é©±åŠ¨çš„æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿï¼Œè‡ªåŠ¨é¢„åŠ è½½å’Œç¼“å­˜è§†é¢‘ç‰‡æ®µ
- **åå°ä¸‹è½½**ï¼šåˆ©ç”¨è§‚çœ‹å†å²ï¼Œåœ¨åå°è‡ªåŠ¨ä¸‹è½½å†å²è§†é¢‘ï¼Œç¡®ä¿ç¦»çº¿ä¹Ÿèƒ½è§‚çœ‹
- **æ’­æ”¾æ§åˆ¶**ï¼šå®Œæ•´çš„æ’­æ”¾æ§åˆ¶åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¿›åº¦æ¡ã€éŸ³é‡æ§åˆ¶ã€æ’­æ”¾é€Ÿåº¦è°ƒèŠ‚ã€å…¨å±æ¨¡å¼ç­‰
- **ç§»åŠ¨ç«¯ä¼˜åŒ–**ï¼šä¸“é—¨ä¸ºç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„æ’­æ”¾å™¨ç•Œé¢å’Œæ‰‹åŠ¿æ§åˆ¶

### ğŸ” å¤šæºå¹¶è¡Œæœç´¢

- **èšåˆæœç´¢å¼•æ“**ï¼šåŒæ—¶åœ¨å¤šä¸ªè§†é¢‘æºä¸­å¹¶è¡Œæœç´¢ï¼ˆ`lib/api/search-api.ts`ï¼‰ï¼Œå¤§å¹…æå‡æœç´¢é€Ÿåº¦
- **è‡ªå®šä¹‰è§†é¢‘æº**ï¼šæ”¯æŒæ·»åŠ ã€ç¼–è¾‘å’Œç®¡ç†è‡ªå®šä¹‰è§†é¢‘æºï¼ˆ`lib/store/settings-store.ts`ï¼‰
- **æ™ºèƒ½è§£æ**ï¼šç»Ÿä¸€çš„è§£æå™¨ç³»ç»Ÿï¼ˆ`lib/api/parsers.ts`ï¼‰ï¼Œè‡ªåŠ¨å¤„ç†ä¸åŒæºçš„æ•°æ®æ ¼å¼
- **æœç´¢å†å²**ï¼šè‡ªåŠ¨ä¿å­˜æœç´¢å†å²ï¼Œæ”¯æŒå¿«é€Ÿé‡æ–°æœç´¢ï¼ˆ`lib/store/search-history-store.ts`ï¼‰
- **ç»“æœæ’åº**ï¼šæ”¯æŒæŒ‰è¯„åˆ†ã€æ—¶é—´ã€ç›¸å…³æ€§ç­‰å¤šç§æ–¹å¼æ’åºæœç´¢ç»“æœ

### ğŸ¬ è±†ç“£é›†æˆ

- **è¯¦ç»†å½±è§†ä¿¡æ¯**ï¼šè‡ªåŠ¨è·å–è±†ç“£è¯„åˆ†ã€æ¼”å‘˜é˜µå®¹ã€å‰§æƒ…ç®€ä»‹ç­‰è¯¦ç»†ä¿¡æ¯
- **æ¨èç³»ç»Ÿ**ï¼šåŸºäºè±†ç“£æ•°æ®çš„ç›¸å…³æ¨è
- **ä¸“ä¸šè¯„ä»·**ï¼šå±•ç¤ºè±†ç“£ç”¨æˆ·è¯„ä»·å’Œä¸“ä¸šå½±è¯„

### ğŸ’¾ è§‚çœ‹å†å²ç®¡ç†

- **è‡ªåŠ¨è®°å½•**ï¼šè‡ªåŠ¨è®°å½•è§‚çœ‹è¿›åº¦å’Œå†å²ï¼ˆ`lib/store/history-store.ts`ï¼‰
- **æ–­ç‚¹ç»­æ’­**ï¼šä»ä¸Šæ¬¡è§‚çœ‹ä½ç½®ç»§ç»­æ’­æ”¾
- **å†å²ç®¡ç†**ï¼šæ”¯æŒåˆ é™¤å•æ¡å†å²æˆ–æ¸…ç©ºå…¨éƒ¨å†å²
- **éšç§ä¿æŠ¤**ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¸Šä¼ åˆ°æœåŠ¡å™¨

### ğŸ“± å“åº”å¼è®¾è®¡

- **å…¨ç«¯é€‚é…**ï¼šå®Œç¾æ”¯æŒæ¡Œé¢ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡
- **ç§»åŠ¨ä¼˜å…ˆ**ï¼šä¸“é—¨çš„ç§»åŠ¨ç«¯ç»„ä»¶å’Œäº¤äº’è®¾è®¡
- **è§¦æ‘¸ä¼˜åŒ–**ï¼šé’ˆå¯¹è§¦æ‘¸å±ä¼˜åŒ–çš„æ‰‹åŠ¿å’Œäº¤äº’

### ğŸŒ™ ä¸»é¢˜ç³»ç»Ÿ

- **æ·±è‰²/æµ…è‰²æ¨¡å¼**ï¼šæ”¯æŒç³»ç»Ÿçº§ä¸»é¢˜åˆ‡æ¢
- **åŠ¨æ€ä¸»é¢˜**ï¼šåŸºäº CSS Variables çš„åŠ¨æ€ä¸»é¢˜ç³»ç»Ÿ
- **æ— ç¼è¿‡æ¸¡**ï¼šä¸»é¢˜åˆ‡æ¢æ—¶çš„å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»

### âŒ¨ï¸ æ— éšœç¢è®¾è®¡

- **é”®ç›˜å¯¼èˆª**ï¼šå®Œæ•´çš„é”®ç›˜å¿«æ·é”®æ”¯æŒ
- **ARIA æ ‡ç­¾**ï¼šç¬¦åˆ WCAG 2.2 æ ‡å‡†çš„æ— éšœç¢å®ç°
- **è¯­ä¹‰åŒ– HTML**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾æå‡å¯è®¿é—®æ€§
- **é«˜å¯¹æ¯”åº¦**ï¼šç¡®ä¿ 4.5:1 çš„æ–‡å­—å¯¹æ¯”åº¦

## ğŸ”’ éšè—æ¨¡å¼

æœ¬é¡¹ç›®åŒ…å«ä¸€ä¸ªéšè—çš„"æˆäººæ¨¡å¼"ï¼Œä»…é€šè¿‡ç‰¹å®šæ“ä½œæ¿€æ´»ï¼š

1. åœ¨é¦–é¡µç‚¹å‡»"ç®¡ç†æ ‡ç­¾"
2. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ **"è‰²æƒ…"** å¹¶æ·»åŠ 
3. ç‚¹å‡»æ–°æ·»åŠ çš„ **"è‰²æƒ…"** æ ‡ç­¾
4. ç³»ç»Ÿå°†è‡ªåŠ¨è·³è½¬è‡³éšè—æ¨¡å¼é¡µé¢

> **æ³¨æ„**ï¼šéšè—æ¨¡å¼ä¸‹çš„å†…å®¹æºä¸ä¸»é¡µå®Œå…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°ã€‚

## ğŸ›  æŠ€æœ¯æ ˆ

### å‰ç«¯æ ¸å¿ƒ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **[Next.js](https://nextjs.org/)** | 16.0.3 | React æ¡†æ¶ï¼Œä½¿ç”¨ App Router |
| **[React](https://react.dev/)** | 19.2.0 | UI ç»„ä»¶åº“ |
| **[TypeScript](https://www.typescriptlang.org/)** | 5.x | ç±»å‹å®‰å…¨çš„ JavaScript |
| **[Tailwind CSS](https://tailwindcss.com/)** | 4.x | å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶ |
| **[Zustand](https://github.com/pmndrs/zustand)** | 5.0.2 | è½»é‡çº§çŠ¶æ€ç®¡ç† |

### å¼€å‘å·¥å…·

- **ESLint 9**ï¼šä»£ç è´¨é‡æ£€æŸ¥
- **PostCSS 8**ï¼šCSS å¤„ç†å™¨
- **Vercel Analytics**ï¼šæ€§èƒ½ç›‘æ§å’Œåˆ†æ

### æ¶æ„ç‰¹ç‚¹

- **App Router**ï¼šNext.js 13+ çš„æ–°è·¯ç”±ç³»ç»Ÿï¼Œæ”¯æŒæœåŠ¡ç«¯ç»„ä»¶å’Œæµå¼æ¸²æŸ“
- **API Routes**ï¼šå†…ç½® API ç«¯ç‚¹ï¼Œå¤„ç†è±†ç“£æ•°æ®å’Œè§†é¢‘æºä»£ç†
- **Service Worker**ï¼šç¦»çº¿ç¼“å­˜å’Œæ™ºèƒ½é¢„åŠ è½½
- **Server Components**ï¼šä¼˜åŒ–é¦–å±åŠ è½½æ€§èƒ½
- **Client Components**ï¼šå¤æ‚äº¤äº’å’ŒçŠ¶æ€ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

| å·¥å…· | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ |
|------|----------|----------|
| **Node.js** | 20.0.0 | 20.x LTS |
| **npm** | 9.0.0 | 10.x |
| **Git** | 2.30.0 | æœ€æ–°ç‰ˆæœ¬ |

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/KuekHaoYang/KVideo.git
cd KVideo
```

#### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

å¦‚æœä½ ä½¿ç”¨å…¶ä»–åŒ…ç®¡ç†å™¨ï¼š

```bash
yarn install
pnpm install
```

#### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

å¼€å‘æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

#### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
npm start
```



## ğŸ“‚ é¡¹ç›®ç»“æ„

```
KVideo/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ douban/               # è±†ç“£ API ä»£ç†
â”‚   â”‚   â”‚   â””â”€â”€ route.ts          # è±†ç“£æ•°æ®è·å–ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ play/                 # è§†é¢‘æ’­æ”¾ä»£ç†
â”‚   â”‚   â”‚   â””â”€â”€ [...segments]/    # HLS ç‰‡æ®µä»£ç†
â”‚   â”‚   â””â”€â”€ proxy/                # é€šç”¨ä»£ç†ç«¯ç‚¹
â”‚   â”œâ”€â”€ player/                   # æ’­æ”¾å™¨é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx              # è§†é¢‘æ’­æ”¾é¡µé¢
â”‚   â”œâ”€â”€ settings/                 # è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx              # åº”ç”¨è®¾ç½®ç•Œé¢
â”‚   â”œâ”€â”€ styles/                   # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ accordion.css         # æ‰‹é£ç´ç»„ä»¶æ ·å¼
â”‚   â”‚   â”œâ”€â”€ badge.css             # å¾½ç« ç»„ä»¶æ ·å¼
â”‚   â”‚   â”œâ”€â”€ button.css            # æŒ‰é’®ç»„ä»¶æ ·å¼
â”‚   â”‚   â”œâ”€â”€ glass.css             # Liquid Glass æ ¸å¿ƒæ ·å¼
â”‚   â”‚   â”œâ”€â”€ input.css             # è¾“å…¥æ¡†ç»„ä»¶æ ·å¼
â”‚   â”‚   â”œâ”€â”€ modal.css             # æ¨¡æ€æ¡†ç»„ä»¶æ ·å¼
â”‚   â”‚   â””â”€â”€ tabs.css              # æ ‡ç­¾é¡µç»„ä»¶æ ·å¼
â”‚   â”œâ”€â”€ globals.css               # å…¨å±€ CSS å…¥å£
â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µï¼ˆæœç´¢é¡µé¢ï¼‰
â”‚   â””â”€â”€ scroll-optimization.css   # æ»šåŠ¨ä¼˜åŒ–æ ·å¼
â”‚
â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”œâ”€â”€ history/                  # è§‚çœ‹å†å²ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ClearHistoryButton.tsx
â”‚   â”‚   â”œâ”€â”€ HistoryDownloadManager.tsx
â”‚   â”‚   â”œâ”€â”€ HistoryItem.tsx
â”‚   â”‚   â”œâ”€â”€ HistoryModal.tsx
â”‚   â”‚   â”œâ”€â”€ HistoryScrollArea.tsx
â”‚   â”‚   â”œâ”€â”€ HistorySectionHeader.tsx
â”‚   â”‚   â””â”€â”€ WatchHistorySidebar.tsx
â”‚   â”œâ”€â”€ home/                     # é¦–é¡µç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomeEpisodeList.tsx
â”‚   â”‚   â”œâ”€â”€ HomeHeader.tsx
â”‚   â”‚   â”œâ”€â”€ HomeLayout.tsx
â”‚   â”‚   â”œâ”€â”€ HomeSearchResults.tsx
â”‚   â”‚   â”œâ”€â”€ HomeVideoActions.tsx
â”‚   â”‚   â”œâ”€â”€ HomeVideoCard.tsx
â”‚   â”‚   â””â”€â”€ HomeVideoGrid.tsx
â”‚   â”œâ”€â”€ layout/                   # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ SidebarLayout.tsx
â”‚   â”œâ”€â”€ player/                   # æ’­æ”¾å™¨ç»„ä»¶ï¼ˆ53 ä¸ªå­ç»„ä»¶ï¼‰
â”‚   â”‚   â”œâ”€â”€ DesktopPlayer.tsx     # æ¡Œé¢æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ MobilePlayer.tsx      # ç§»åŠ¨ç«¯æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ PlaybackControls.tsx  # æ’­æ”¾æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ ProgressBar.tsx       # è¿›åº¦æ¡
â”‚   â”‚   â”œâ”€â”€ VolumeControl.tsx     # éŸ³é‡æ§åˆ¶
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–æ’­æ”¾å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ search/                   # æœç´¢ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx         # æœç´¢æ 
â”‚   â”‚   â”œâ”€â”€ SearchFilters.tsx     # æœç´¢è¿‡æ»¤å™¨
â”‚   â”‚   â”œâ”€â”€ SearchHistory.tsx     # æœç´¢å†å²
â”‚   â”‚   â”œâ”€â”€ SearchResults.tsx     # æœç´¢ç»“æœ
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–æœç´¢ç»„ä»¶
â”‚   â”œâ”€â”€ settings/                 # è®¾ç½®ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SettingsLayout.tsx    # è®¾ç½®é¡µé¢å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ SourceManagement.tsx  # è§†é¢‘æºç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ThemeSettings.tsx     # ä¸»é¢˜è®¾ç½®
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–è®¾ç½®ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                       # é€šç”¨ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Accordion.tsx         # æ‰‹é£ç´ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Badge.tsx             # å¾½ç« ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.tsx            # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Input.tsx             # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Modal.tsx             # æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ModalHeader.tsx       # æ¨¡æ€æ¡†å¤´éƒ¨
â”‚   â”‚   â”œâ”€â”€ ScrollArea.tsx        # æ»šåŠ¨åŒºåŸŸ
â”‚   â”‚   â”œâ”€â”€ Tabs.tsx              # æ ‡ç­¾é¡µç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ SearchLoadingAnimation.tsx
â”‚   â”œâ”€â”€ ServiceWorkerRegister.tsx # Service Worker æ³¨å†Œ
â”‚   â”œâ”€â”€ ThemeProvider.tsx         # ä¸»é¢˜æä¾›è€…
â”‚   â””â”€â”€ ThemeSwitcher.tsx         # ä¸»é¢˜åˆ‡æ¢å™¨
â”‚
â”œâ”€â”€ lib/                          # æ ¸å¿ƒé€»è¾‘å’Œå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ accessibility/            # æ— éšœç¢åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ keyboard-shortcuts.ts # é”®ç›˜å¿«æ·é”®
â”‚   â”œâ”€â”€ api/                      # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ client.ts             # HTTP å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ default-sources.ts    # é»˜è®¤è§†é¢‘æºé…ç½®
â”‚   â”‚   â”œâ”€â”€ detail-api.ts         # è§†é¢‘è¯¦æƒ… API
â”‚   â”‚   â”œâ”€â”€ http-utils.ts         # HTTP å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ parsers.ts            # æ•°æ®è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ search-api.ts         # æœç´¢ APIï¼ˆå¹¶è¡Œæœç´¢ï¼‰
â”‚   â”‚   â””â”€â”€ video-sources.ts      # è§†é¢‘æºç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ hooks/                    # React Hooks
â”‚   â”‚   â”œâ”€â”€ mobile/               # ç§»åŠ¨ç«¯ä¸“ç”¨ hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useMobileGestures.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useMobilePlaybackControls.ts
â”‚   â”‚   â”‚   â””â”€â”€ useMobileTouchControls.ts
â”‚   â”‚   â”œâ”€â”€ useHistoryDownloader.ts    # å†å²è§†é¢‘ä¸‹è½½
â”‚   â”‚   â”œâ”€â”€ useHomePage.ts             # é¦–é¡µé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useInfiniteScroll.ts       # æ— é™æ»šåŠ¨
â”‚   â”‚   â”œâ”€â”€ useKeyboardNavigation.ts   # é”®ç›˜å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ useMobilePlayer.ts         # ç§»åŠ¨ç«¯æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ useParallelSearch.ts       # å¹¶è¡Œæœç´¢
â”‚   â”‚   â”œâ”€â”€ useSearchAction.ts         # æœç´¢æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ useSearchCache.ts          # æœç´¢ç¼“å­˜
â”‚   â”‚   â”œâ”€â”€ useSearchHistory.ts        # æœç´¢å†å²
â”‚   â”‚   â”œâ”€â”€ useSearchState.ts          # æœç´¢çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ useSourceBadges.ts         # æ¥æºå¾½ç« 
â”‚   â”‚   â”œâ”€â”€ useTypeBadges.ts           # ç±»å‹å¾½ç« 
â”‚   â”‚   â””â”€â”€ useVideoPlayer.ts          # è§†é¢‘æ’­æ”¾å™¨
â”‚   â”œâ”€â”€ store/                    # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ history-store.ts      # è§‚çœ‹å†å²çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ search-history-store.ts    # æœç´¢å†å²çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ settings-helpers.ts   # è®¾ç½®è¾…åŠ©å‡½æ•°
â”‚   â”‚   â””â”€â”€ settings-store.ts     # åº”ç”¨è®¾ç½®çŠ¶æ€
â”‚   â”œâ”€â”€ types/                    # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ video.ts              # è§†é¢‘ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ cache-utils.ts        # ç¼“å­˜å·¥å…·
â”‚       â”œâ”€â”€ date-utils.ts         # æ—¥æœŸå·¥å…·
â”‚       â”œâ”€â”€ dom-utils.ts          # DOM å·¥å…·
â”‚       â”œâ”€â”€ image-utils.ts        # å›¾ç‰‡å·¥å…·
â”‚       â”œâ”€â”€ player-utils.ts       # æ’­æ”¾å™¨å·¥å…·
â”‚       â”œâ”€â”€ scroll-utils.ts       # æ»šåŠ¨å·¥å…·
â”‚       â”œâ”€â”€ storage-utils.ts      # å­˜å‚¨å·¥å…·
â”‚       â”œâ”€â”€ theme-utils.ts        # ä¸»é¢˜å·¥å…·
â”‚       â”œâ”€â”€ url-utils.ts          # URL å·¥å…·
â”‚       â””â”€â”€ video-utils.ts        # è§†é¢‘å·¥å…·
â”‚
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icon.png                  # åº”ç”¨å›¾æ ‡
â”‚   â””â”€â”€ service-worker.js         # Service Workerï¼ˆç¼“å­˜å’Œç¦»çº¿æ”¯æŒï¼‰
â”‚
â”œâ”€â”€ .github/                      # GitHub é…ç½®
â”‚   â””â”€â”€ workflows/                # GitHub Actions
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ CODE_OF_CONDUCT.md            # è¡Œä¸ºå‡†åˆ™
â”œâ”€â”€ CONTRIBUTING.md               # è´¡çŒ®æŒ‡å—
â”œâ”€â”€ LICENSE                       # MIT è®¸å¯è¯
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ SECURITY.md                   # å®‰å…¨æ”¿ç­–
â”œâ”€â”€ eslint.config.mjs             # ESLint é…ç½®
â”œâ”€â”€ next-env.d.ts                 # Next.js ç±»å‹å®šä¹‰
â”œâ”€â”€ next.config.ts                # Next.js é…ç½®
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ postcss.config.mjs            # PostCSS é…ç½®
â””â”€â”€ tsconfig.json                 # TypeScript é…ç½®
```

## ğŸ¨ Liquid Glass è®¾è®¡ç³»ç»Ÿ

### è®¾è®¡åŸåˆ™

Liquid Glass è®¾è®¡ç³»ç»Ÿæ˜¯æœ¬é¡¹ç›®çš„è§†è§‰æ ¸å¿ƒï¼Œéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

#### 1. ç»ç’ƒæ•ˆæœï¼ˆæ•°å­—å…ƒæè´¨ï¼‰

```css
/* æ ¸å¿ƒç»ç’ƒæ•ˆæœå®ç° */
.glass {
  backdrop-filter: blur(20px) saturate(180%) brightness(110%);
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
}
```

#### 2. ç»Ÿä¸€åœ†è§’

- **å®¹å™¨ç±»ç»„ä»¶**ï¼šä½¿ç”¨ `rounded-2xl`ï¼ˆè¾ƒå¤§çš„åœ†è§’ï¼‰
  - æŒ‰é’®ã€è¾“å…¥æ¡†ã€å¡ç‰‡ã€æ¨¡æ€æ¡†ç­‰
- **å°å‹å…ƒç´ **ï¼šä½¿ç”¨ `rounded-full`ï¼ˆå®Œå…¨åœ†å½¢/è¯ä¸¸å½¢ï¼‰
  - å¤´åƒã€å¾½ç« ã€æ»‘å—æ‹‡æŒ‡ç­‰

#### 3. å…‰å½±äº¤äº’

- æ‚¬åœçŠ¶æ€ï¼šå†…å‘å…‰æ•ˆæœ
- ç„¦ç‚¹çŠ¶æ€ï¼šå¢å¼ºçš„è¾¹æ¡†é«˜äº®
- åŠ¨æ€é˜´å½±ï¼šæ ¹æ®äº¤äº’çŠ¶æ€è°ƒæ•´

#### 4. æµç•…åŠ¨ç”»

```css
/* æ ‡å‡†è¿‡æ¸¡æ›²çº¿ */
transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
```

### ç»„ä»¶åº“

é¡¹ç›®åŒ…å«å®Œæ•´çš„ Liquid Glass ç»„ä»¶åº“ï¼š

- **Accordion**ï¼šæ‰‹é£ç´æŠ˜å é¢æ¿
- **Badge**ï¼šçŠ¶æ€å¾½ç« å’Œæ ‡ç­¾
- **Button**ï¼šå¤šç§æ ·å¼çš„æŒ‰é’®
- **Input**ï¼šè¾“å…¥æ¡†å’Œæ–‡æœ¬åŒºåŸŸ
- **Modal**ï¼šæ¨¡æ€å¯¹è¯æ¡†
- **Tabs**ï¼šæ ‡ç­¾é¡µåˆ‡æ¢
- **ScrollArea**ï¼šè‡ªå®šä¹‰æ»šåŠ¨åŒºåŸŸ
- æ›´å¤šç»„ä»¶ä½äº `components/ui/`

## ğŸ— æ¶æ„è®¾è®¡

### çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Zustand è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¸»è¦çš„ store åŒ…æ‹¬ï¼š

1. **Settings Store**ï¼ˆ`lib/store/settings-store.ts`ï¼‰
   - ä¸»é¢˜è®¾ç½®
   - è§†é¢‘æºç®¡ç†
   - æœç´¢æ’åºåå¥½
   - æ’­æ”¾å™¨è®¾ç½®

2. **History Store**ï¼ˆ`lib/store/history-store.ts`ï¼‰
   - è§‚çœ‹å†å²è®°å½•
   - æ’­æ”¾è¿›åº¦
   - å†å²ç®¡ç†æ“ä½œ

3. **Search History Store**ï¼ˆ`lib/store/search-history-store.ts`ï¼‰
   - æœç´¢å†å²
   - å¿«é€Ÿæœç´¢å»ºè®®

### API æ¶æ„

#### å¹¶è¡Œæœç´¢å¼•æ“

```typescript
// lib/api/search-api.ts
// åŒæ—¶åœ¨å¤šä¸ªè§†é¢‘æºä¸­æœç´¢ï¼Œè¿”å›èšåˆç»“æœ
export async function parallelSearch(query: string): Promise<SearchResult[]>
```

#### è±†ç“£é›†æˆ

```typescript
// app/api/douban/route.ts
// ä»£ç†è±†ç“£ APIï¼Œé¿å… CORS é—®é¢˜
```

#### è§†é¢‘ä»£ç†

```typescript
// app/api/play/[...segments]/route.ts
// ä»£ç†è§†é¢‘è¯·æ±‚ï¼Œå¤„ç†è·¨åŸŸå’Œé˜²ç›—é“¾
```

### ç¼“å­˜ç­–ç•¥

#### Service Worker ç¼“å­˜

- **HLS æ¸…å•æ–‡ä»¶**ï¼šç¼“å­˜ m3u8 æ’­æ”¾åˆ—è¡¨
- **è§†é¢‘ç‰‡æ®µ**ï¼šæ™ºèƒ½ç¼“å­˜ .ts è§†é¢‘ç‰‡æ®µ
- **é™æ€èµ„æº**ï¼šç¼“å­˜å›¾ç‰‡ã€CSSã€JS æ–‡ä»¶

#### å†å²è§†é¢‘é¢„åŠ è½½

- åå°è‡ªåŠ¨ä¸‹è½½å†å²è§†é¢‘
- ä¼˜å…ˆçº§é˜Ÿåˆ—ç®¡ç†
- å­˜å‚¨ç©ºé—´ç®¡ç†

### æ€§èƒ½ä¼˜åŒ–

1. **æœåŠ¡ç«¯ç»„ä»¶**ï¼šé¦–å±å¿«é€ŸåŠ è½½
2. **ä»£ç åˆ†å‰²**ï¼šæŒ‰è·¯ç”±è‡ªåŠ¨åˆ†å‰²
3. **å›¾ç‰‡ä¼˜åŒ–**ï¼šæ¸è¿›å¼åŠ è½½
4. **è™šæ‹Ÿæ»šåŠ¨**ï¼šå¤§åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
5. **ç¼“å­˜ç­–ç•¥**ï¼šå¤šå±‚ç¼“å­˜æœºåˆ¶

## ğŸ§‘â€ğŸ’» å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

#### æ–‡ä»¶é•¿åº¦é™åˆ¶

> [!IMPORTANT]
> **æ‰€æœ‰é¡¹ç›®æ–‡ä»¶å¿…é¡»ä¿æŒåœ¨ 150 è¡Œä»¥å†…ï¼ˆé™¤ç³»ç»Ÿæ–‡ä»¶å¤–ï¼‰**

è¿™æ˜¯é¡¹ç›®çš„ç¡¬æ€§è§„åˆ™ã€‚åœ¨æäº¤ä»£ç å‰ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š

```bash
find . -type f -not -path "*/node_modules/*" -not -path "*/.next/*" -not -path "*/.git/*" -not -name "package-lock.json" -not -name "*.png" -not -name "*.md" | xargs wc -l | awk '$1 > 150 && $2 != "total" {print $2 " - " $1 "è¡Œ"}'
```

å¦‚æœæœ‰æ–‡ä»¶è¶…è¿‡ 150 è¡Œï¼Œè¯·é‡æ„ä»£ç ï¼š

1. **æå–ç»„ä»¶**ï¼šå°†å¤§ç»„ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶
2. **æå– Hook**ï¼šå°†å¤æ‚é€»è¾‘æå–åˆ°è‡ªå®šä¹‰ Hook
3. **æå–å·¥å…·å‡½æ•°**ï¼šå°†é€šç”¨å‡½æ•°ç§»è‡³ `lib/utils/`
4. **æ¨¡å—åŒ–**ï¼šæŒ‰åŠŸèƒ½æ‹†åˆ†æ–‡ä»¶

#### TypeScript è§„èŒƒ

- é¿å…ä½¿ç”¨ `any`ï¼Œä½¿ç”¨å…·ä½“ç±»å‹æˆ– `unknown`
- ä¸ºæ‰€æœ‰å‡½æ•°æ·»åŠ è¿”å›ç±»å‹
- ä½¿ç”¨æ¥å£ï¼ˆ`interface`ï¼‰å®šä¹‰å¯¹è±¡ç±»å‹
- åˆç†ä½¿ç”¨æ³›å‹æé«˜ä»£ç å¤ç”¨æ€§

#### ç»„ä»¶è§„èŒƒ

- ä½¿ç”¨å‡½æ•°ç»„ä»¶å’Œ Hooks
- éµå¾ªå•ä¸€èŒè´£åŸåˆ™
- Props ç±»å‹å¿…é¡»æ˜ç¡®å®šä¹‰
- å¤ç”¨ `components/ui/` ä¸‹çš„åŸºç¡€ç»„ä»¶

#### æ ·å¼è§„èŒƒ

- ä¼˜å…ˆä½¿ç”¨ Tailwind ç±»å
- å¤æ‚æ ·å¼ä½¿ç”¨ CSS Modules æˆ–ä¸“ç”¨ CSS æ–‡ä»¶
- éµå¾ª Liquid Glass è®¾è®¡ç³»ç»Ÿ
- ç¡®ä¿å“åº”å¼è®¾è®¡

### Git å·¥ä½œæµ

1. ä» `main` åˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. ä½¿ç”¨è¯­ä¹‰åŒ–çš„åˆ†æ”¯åï¼ˆ`feat/`ã€`fix/`ã€`docs/` ç­‰ï¼‰
3. ç¼–å†™æ¸…æ™°çš„æäº¤ä¿¡æ¯
4. æäº¤ PR å‰ç¡®ä¿é€šè¿‡æ‰€æœ‰æ£€æŸ¥

### æµ‹è¯•

è¿è¡Œä»£ç æ£€æŸ¥ï¼š

```bash
npm run lint
```

### è°ƒè¯•æŠ€å·§

1. **React DevTools**ï¼šæ£€æŸ¥ç»„ä»¶çŠ¶æ€å’Œ props
2. **Console æ—¥å¿—**ï¼šä½¿ç”¨åˆ†ç»„å’Œæ ·å¼åŒ–æ—¥å¿—
3. **Network é¢æ¿**ï¼šç›‘æ§ API è¯·æ±‚å’Œç¼“å­˜
4. **Performance é¢æ¿**ï¼šåˆ†ææ€§èƒ½ç“¶é¢ˆ

## ğŸš¢ éƒ¨ç½²

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/KuekHaoYang/KVideo)

1. è¿æ¥ GitHub ä»“åº“
2. Vercel ä¼šè‡ªåŠ¨æ£€æµ‹ Next.js é¡¹ç›®
3. ç‚¹å‡» "Deploy" å³å¯

### é™æ€å¯¼å‡º

```bash
# next.config.ts ä¸­æ·»åŠ 
export default {
  output: 'export'
}

# æ„å»º
npm run build
# è¾“å‡ºåˆ° out/ ç›®å½•
```

### ğŸ³ Docker éƒ¨ç½²

#### 1. è·å–ä»£ç 

```bash
git clone https://github.com/KuekHaoYang/KVideo.git
cd KVideo
```

#### 2. æ„å»ºé•œåƒ

```bash
docker build -t kvideo .
```

#### 3. è¿è¡Œå®¹å™¨

```bash
docker-compose up -d
```

åº”ç”¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

#### 3. ä½¿ç”¨ Docker Hub å®‰è£…

å¦‚æœä½ ä¸æƒ³è‡ªå·±æ„å»ºé•œåƒï¼Œå¯ä»¥ç›´æ¥ä» Docker Hub æ‹‰å–ï¼š

```bash
docker pull kuekhaoyang/kvideo:latest
docker run -d -p 3000:3000 --name kvideo kuekhaoyang/kvideo:latest
```

#### 4. å¦‚ä½•æ›´æ–°é•œåƒ

å½“æœ‰æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ›´æ–°ï¼š

```bash
docker stop kvideo
docker rm kvideo
docker pull kuekhaoyang/kvideo:latest
docker run -d -p 3000:3000 --name kvideo kuekhaoyang/kvideo:latest
```

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬éå¸¸æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†çš„è´¡çŒ®æŒ‡å—ã€‚

### å¿«é€Ÿè´¡çŒ®

1. **æŠ¥å‘Š Bug**ï¼šä½¿ç”¨ GitHub Issues
2. **åŠŸèƒ½å»ºè®®**ï¼šåœ¨ Issues ä¸­æå‡º
3. **ä»£ç è´¡çŒ®**ï¼šFork â†’ Branch â†’ PR
4. **æ–‡æ¡£æ”¹è¿›**ï¼šç›´æ¥æäº¤ PR

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT è®¸å¯è¯](LICENSE) å¼€æºã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Zustand](https://github.com/pmndrs/zustand) - çŠ¶æ€ç®¡ç†
- [React](https://react.dev/) - UI åº“

## ğŸ“ è”ç³»æ–¹å¼

- **ä½œè€…**ï¼š[KuekHaoYang](https://github.com/KuekHaoYang)
- **é¡¹ç›®ä¸»é¡µ**ï¼š[https://github.com/KuekHaoYang/KVideo](https://github.com/KuekHaoYang/KVideo)
- **é—®é¢˜åé¦ˆ**ï¼š[GitHub Issues](https://github.com/KuekHaoYang/KVideo/issues)





---

<div align="center">
  Made with â¤ï¸ by <a href="https://github.com/KuekHaoYang">KuekHaoYang</a>
  <br>
  å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™ä¸€ä¸ª â­ï¸
</div>
